<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="Grant Emerson"/><link rel="canonical" href="http://www.grantemerson.co/blog/SwiftMoji10"/><meta name="twitter:url" content="http://www.grantemerson.co/blog/SwiftMoji10"/><meta name="og:url" content="http://www.grantemerson.co/blog/SwiftMoji10"/><title>Different Days | Grant Emerson</title><meta name="twitter:title" content="Different Days | Grant Emerson"/><meta name="og:title" content="Different Days | Grant Emerson"/><meta name="description" content="SwiftMoji Entry #10"/><meta name="twitter:description" content="SwiftMoji Entry #10"/><meta name="og:description" content="SwiftMoji Entry #10"/><meta name="twitter:card" content="summary_large_image"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/favicon.ico" type="icon"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Grant Emerson"/><meta name="twitter:image" content="http://www.grantemerson.co/ArticleImages/SwiftMoji.jpeg"/><meta name="og:image" content="http://www.grantemerson.co/ArticleImages/SwiftMoji.jpeg"/></head><body class="item-page"><header><div class="wrapper"><a class="site-name" href="/">Grant Emerson</a><nav><ul><li><a href="/about">About Me</a></li><li><a class="selected" href="/blog">Blog</a></li><li><a href="/projects">Projects</a></li><li><a href="mailto:grantjemerson@gmail.com">Contact</a></li></ul></nav></div></header><div class="wrapper"><article><div class="content"><h1>Different Days</h1><span class="article-date">Published on Dec 10, 2019</span><div>
    <img class="article-image" src="/ArticleImages/SwiftMoji.jpeg">
    <p class="article-image-description">Different Days â€” SwiftMoji Entry #10</p>
</div><p>Swift 5.1 added the capability to diff any two <em>BidirectionalCollections</em> with equivalent <em>Element</em> types. The function is called <em>difference(from:)</em> and it has two parameters. The first is labeled <em>from</em> and it indicates the starting state from which to calculate the changes necessary to convert it to be equal to the state of the caller. Although not needed if the <em>Elements</em> are <em>Equatable</em>, the <em>difference</em> function has a second parameter labeled <em>by</em> which is a closure taking two elements and returning a boolean based on equivalence. In the following example, two <em>Arrays</em> are initialized with a collection of calendar items. These <em>Arrays</em> represent a summer and winter schedule. When the <em>difference</em> function is called on <em>winterSchedule</em> with a base state of <em>summerSchedule</em>, the resulting <em>CollectionDifference</em> contains one <em>removal</em> for mowing grass and two <em>insertions</em> for shoveling and starting the fireplace.</p><pre><code><span class="keyword">import</span> Foundation

<span class="keyword">struct</span> ğŸ—“: <span class="type">Equatable</span> {
    <span class="keyword">let</span> title: <span class="type">String</span>
    <span class="keyword">let</span> date: <span class="type">Date</span>
}

<span class="keyword">extension</span> <span class="type">Date</span> {
    <span class="keyword">static let</span> dateFormatter: <span class="type">DateFormatter</span> = {
        <span class="keyword">let</span> dateFormatter = <span class="type">DateFormatter</span>()
        dateFormatter.<span class="property">dateFormat</span> = <span class="string">"h:mm a"</span>
        <span class="keyword">return</span> dateFormatter
    }()
    
    <span class="keyword">init</span>(<span class="keyword">_</span> text: <span class="type">String</span>) {
        <span class="keyword">self</span> = <span class="type">Self</span>.<span class="property">dateFormatter</span>.<span class="call">date</span>(from: text)!
    }
}

<span class="keyword">let</span> summerSchedule = [
    ğŸ—“(title: <span class="string">"Eat ğŸ³"</span>, date: <span class="type">Date</span>(<span class="string">"7:00 AM"</span>)),
    ğŸ—“(title: <span class="string">"ğŸš— to ğŸ¢"</span>, date: <span class="type">Date</span>(<span class="string">"9:00 AM"</span>)),
    ğŸ—“(title: <span class="string">"Eat ğŸ½"</span>, date: <span class="type">Date</span>(<span class="string">"5:00 PM"</span>)),
    ğŸ—“(title: <span class="string">"Mow ğŸŒ±"</span>, date: <span class="type">Date</span>(<span class="string">"6:00 PM"</span>))
]

<span class="keyword">let</span> winterSchedule = [
    ğŸ—“(title: <span class="string">"Eat ğŸ³"</span>, date: <span class="type">Date</span>(<span class="string">"7:00 AM"</span>)),
    ğŸ—“(title: <span class="string">"Shovel Driveway"</span>, date: <span class="type">Date</span>(<span class="string">"8:00 AM"</span>)),
    ğŸ—“(title: <span class="string">"ğŸš— to ğŸ¢"</span>, date: <span class="type">Date</span>(<span class="string">"9:00 AM"</span>)),
    ğŸ—“(title: <span class="string">"Eat ğŸ½"</span>, date: <span class="type">Date</span>(<span class="string">"5:00 PM"</span>)),
    ğŸ—“(title: <span class="string">"Start ğŸ”¥place"</span>, date: <span class="type">Date</span>(<span class="string">"6:00 PM"</span>))
]

<span class="keyword">let</span> changes = winterSchedule.<span class="call">difference</span>(from: summerSchedule)
<span class="keyword">let</span> summerOnlyTasks = changes.<span class="property">removals</span>.<span class="property">count</span> <span class="comment">// 1</span>
<span class="keyword">let</span> winterOnlyTasks = changes.<span class="property">insertions</span>.<span class="property">count</span> <span class="comment">// 2</span>
</code></pre><span>Tagged with: </span><ul class="tag-list"><li><a href="/tags/swiftmoji">SwiftMoji</a></li><li><a href="/tags/swift">Swift</a></li></ul></div></article></div><footer><p>Built using <a href="https://github.com/apple/swift">Swift</a> and <a href="https://github.com/johnsundell/publish">Publish</a>.</p><p>Â© 2023 Grant Emerson</p><p><a href="/feed.rss">RSS</a> | <a href="mailto:grantjemerson@gmail.com">Email</a></p></footer></body></html>